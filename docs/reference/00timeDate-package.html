<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Package of calendar, date, time tools and utilities for Rmetrics."><title>Utilities and tools package — timeDate-package • timeDate</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Utilities and tools package — timeDate-package"><meta property="og:description" content="Package of calendar, date, time tools and utilities for Rmetrics."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">timeDate</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">4032.109.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Utilities and tools package</h1>
      
      <div class="d-none name"><code>00timeDate-package.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Package of calendar, date, time tools and utilities for Rmetrics.</p>
    </div>


    <div class="section level2">
    <h2 id="overview-of-topics">Overview of Topics<a class="anchor" aria-label="anchor" href="#overview-of-topics"></a></h2>
    

<p>This help file describes the concepts and methods behind the S4
  <code>"timeDate"</code> class used in Rmetrics for financial data and time 
  management together with the management of public and ecclesiastical
  holidays.</p>  
<p>The <code>"timeDate"</code> class fulfils the conventions of the ISO 8601 
  standard as well as of the ANSI C and POSIX standards. Beyond
  these standards it provides the "Financial Center" concept
  which allows to handle data records collected in different time 
  zones and mix them up to have always the proper time stamps with 
  respect to your personal financial center, or alternatively to the GMT
  reference time. It can thus also handle time stamps from historical 
  data records from the same time zone, even if the financial 
  centers changed day light saving times at different calendar
  dates.</p>  
<p>Moreover <code>"timeDate"</code> is almost compatible with the <code>"timeDate"</code>
  class in Insightful's SPlus <code>"timeDate"</code> class. If you move between 
  the two worlds of R and SPlus, you will not have to rewrite your
  code. This is important for business applications.</p>  
<p>The <code>"timeDate"</code> class offers not only date and time functionality but
  it also offers sophisticated calendar manipulations for
  business days, weekends, public and ecclesiastical holidays.</p>  
<p>This help page is presented in four sections:</p>  
<p>1. S4 <code>"timeDate"</code> Class and Functions <br>
  2. Operations on <code>"timeDate"</code> Objects <br>
  3. Daylight Saving Time and Financial Centers <br>
  4. Holidays and Holiday Calendars</p>
    </div>
    <div class="section level2">
    <h2 id="-s-timedate-class-and-generator-functions">1. S4 <code>"timeDate"</code> Class and Generator Functions<a class="anchor" aria-label="anchor" href="#-s-timedate-class-and-generator-functions"></a></h2>
    
  
  
<p>Date and time stamps are represented by an S4 object of class <code>"timeDate"</code>.</p>  
<p></p><div class="sourceCode"><pre><code><span></span>
<span>    <span class="kw">setClass</span><span class="op">(</span><span class="st">"timeDate"</span>,</span>
<span>    <span class="fu">representation</span><span class="op">(</span></span>
<span>    Data <span class="op">=</span> <span class="st">"POSIXct"</span>,</span>
<span>    format <span class="op">=</span> <span class="st">"character"</span>,</span>
<span>    FinCenter <span class="op">=</span> <span class="st">"character"</span></span>
<span>    <span class="op">)</span><span class="op">)</span></span>
<span>  </span></code></pre></div>
  
<p>They have three slots.  The <code>@Data</code> slot holds the time
  stamps which are <code>POSIXct</code> formatted as specified in the 
  <code>@format</code> slot. The time stamps are local and belong to the 
  financial center expressed through the slot <code>@FinCenter</code>.</p>  
  
<p>There are several possibilities to generate a <code>"timeDate"</code> object. The
  most forward procedure is to use one of the following functions:<br></p>  
<p><code>timeDate</code> -- Creates a <code>"timeDate"</code> object from scratch, <br><code>timeSequence</code> -- creates a sequence of <code>"timeDate"</code> objects, <br><code>timeCalendar</code> -- creates a <code>"timeDate"</code> object from calendar
  atoms, <br><code>Sys.timeDate</code> -- returns the current date and time as a
  <code>"timeDate"</code> object. <br></p>  
  
<p>With the function <code>timeDate</code> you can create <code>"timeDate"</code> objects 
  from scratch by specifying a character vector of time stamps and a
  financial center which the character vector belongs to. "GMT" is used
  by default as the  reference for all date/time operations.
  But you can set the variable <code>myFinCenter</code> to your local
  financial center reference  if you want to reference dates/time to
  it. <br></p>  
<p>Examples:</p><div class="sourceCode"><pre><code><span></span>
<span>    <span class="co"># Show My local Financial Center - Note, by Default this is "GMT"</span></span>
<span>    <span class="fu"><a href="../reference/options-RmetricsOptions.html">getRmetricsOptions</a></span><span class="op">(</span><span class="st">"myFinCenter"</span><span class="op">)</span></span>
<span>    </span>
<span>    <span class="co"># Compose Character Vectors of Dates and Times:</span></span>
<span>    <span class="va">Dates</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/base-c.html">c</a></span><span class="op">(</span><span class="st">"1989-09-28"</span>,<span class="st">"2001-01-15"</span>,<span class="st">"2004-08-30"</span>,<span class="st">"1990-02-09"</span><span class="op">)</span></span>
<span>    <span class="va">Times</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/base-c.html">c</a></span><span class="op">(</span>  <span class="st">"23:12:55"</span>,  <span class="st">"10:34:02"</span>,  <span class="st">"08:30:00"</span>,  <span class="st">"11:18:23"</span><span class="op">)</span></span>
<span>    <span class="va">charvec</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">Dates</span>, <span class="va">Times</span><span class="op">)</span></span>
<span>    </span>
<span>    <span class="co"># Create a 'timeDate' object</span></span>
<span>    <span class="fu"><a href="../reference/timeDate.html">timeDate</a></span><span class="op">(</span><span class="va">charvec</span><span class="op">)</span></span>
<span>    </span>
<span>    <span class="co"># Create a 'timeDate' object with my financial center set to Zurich</span></span>
<span>    <span class="va">myFinCenter</span> <span class="op">&lt;-</span> <span class="st">"Zurich"</span></span>
<span>    <span class="fu"><a href="../reference/timeDate.html">timeDate</a></span><span class="op">(</span><span class="va">charvec</span><span class="op">)</span></span>
<span></span>
<span>    <span class="co"># if the 'timeDate' was recorded in a different financial center, it</span></span>
<span>    <span class="co"># will be automatically converted to your financial center,</span></span>
<span>    <span class="co"># i.e. "Zurich". </span></span>
<span>    <span class="fu"><a href="../reference/timeDate.html">timeDate</a></span><span class="op">(</span><span class="va">charvec</span>, zone <span class="op">=</span> <span class="st">"Tokyo"</span><span class="op">)</span></span>
<span></span>
<span>    <span class="co"># You can also convert a recorded 'timeDate' from your financial</span></span>
<span>    <span class="co"># center "Zurich" to another one, for example "NewYork".</span></span>
<span>    <span class="fu"><a href="../reference/timeDate.html">timeDate</a></span><span class="op">(</span><span class="va">charvec</span>, FinCenter <span class="op">=</span> <span class="st">"NewYork"</span><span class="op">)</span></span>
<span>  </span></code></pre></div>

<p>NOTE: Rmetrics has implemented an automated date/time format identifier
  for many common date/time formats which tries to automatically recognise  
  the format for the character vector of dates and times. You can have a
  look at <br><code>whichFormat(charvec)</code>. <br></p>  
<p>NOTE: Rmetrics always uses the midnight standard on dates and
  times. You can see it with  <br><code>.midnightStandard("2008-01-31 24:00:00")</code> <br></p>  
  
<p>Alternatively we can create a sequence of <code>"timeDate"</code> objects with the
  help of the function <code>timeSequence</code>. This can be done in several
  ways, either by specifying the range of the data through the arguments
  <code>from</code> and <code>to</code>, or when <code>from</code> is missing, by setting
  the argument <code>length.out</code> of the desired series. Note in the case
  of a monthly sequence, you have further options. For example you can
  generate the series with the first or last day in each month, or use
  more complex rules like the last or n-th Friday in every month. <br></p>  
<p>Examples:</p><div class="sourceCode"><pre><code><span></span>
<span>    <span class="co"># Lets work in an international environment:</span></span>
<span>    <span class="fu"><a href="../reference/options-RmetricsOptions.html">setRmetricsOptions</a></span><span class="op">(</span>myFinCenter <span class="op">=</span> <span class="st">"GMT"</span><span class="op">)</span></span>
<span>    </span>
<span>    <span class="co"># Your 'timeDate' is now in the Financial Center "GMT"</span></span>
<span>    <span class="fu"><a href="../reference/timeDate.html">timeDate</a></span><span class="op">(</span><span class="va">charvec</span><span class="op">)</span></span>
<span>    </span>
<span>    <span class="co"># Daily January 2008 Sequence:</span></span>
<span>    <span class="fu"><a href="../reference/timeDate-Sequence.html">timeSequence</a></span><span class="op">(</span>from <span class="op">=</span> <span class="st">"2008-01-01"</span>, to <span class="op">=</span> <span class="st">"2008-01-31"</span>, by <span class="op">=</span> <span class="st">"day"</span><span class="op">)</span></span>
<span>    </span>
<span>    <span class="co"># Monthly 2008 Sequence:</span></span>
<span>    <span class="va">tS</span> <span class="op">=</span> <span class="fu"><a href="../reference/timeDate-Sequence.html">timeSequence</a></span><span class="op">(</span>from <span class="op">=</span> <span class="st">"2008-01-01"</span>, to <span class="op">=</span> <span class="st">"2008-12-31"</span>, by <span class="op">=</span> <span class="st">"month"</span><span class="op">)</span></span>
<span>    <span class="va">tS</span></span>
<span>    </span>
<span>    <span class="co"># Do you want the last Day or the last Friday in Month Data ?</span></span>
<span>    <span class="fu"><a href="../reference/calendar-firstDay.html">timeLastDayInMonth</a></span><span class="op">(</span><span class="va">tS</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="../reference/calendar-nDay.html">timeLastNdayInMonth</a></span><span class="op">(</span><span class="va">tS</span>, nday <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span>
<span>  </span></code></pre></div>
  
  
<p>A third possibility is to create <code>"timeDate"</code> objects from calendar  
  atoms. You can specify values or vectors of equal length of integers 
  denoting year, month, day, hour, minute and seconds. If every day has 
  the same time stamp, you can just add an offset. <br></p>
<p>Examples:</p><div class="sourceCode"><pre><code><span></span>
<span>    <span class="co"># Monthly calendar for Current Year</span></span>
<span>    <span class="fu"><a href="../reference/options-RmetricsOptions.html">getRmetricsOptions</a></span><span class="op">(</span><span class="st">"currentYear"</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="../reference/timeDate-Calendar.html">timeCalendar</a></span><span class="op">(</span><span class="op">)</span> </span>
<span>    </span>
<span>    <span class="co"># Daily 'timeDate' for January data from Tokyo local time 16:00</span></span>
<span>    <span class="fu"><a href="../reference/timeDate-Calendar.html">timeCalendar</a></span><span class="op">(</span><span class="fl">2008</span>, m<span class="op">=</span><span class="fl">1</span>, d<span class="op">=</span><span class="fl">1</span><span class="op">:</span><span class="fl">31</span>, h<span class="op">=</span><span class="fl">16</span>, zone<span class="op">=</span><span class="st">"Tokyo"</span>, FinCenter<span class="op">=</span><span class="st">"Zurich"</span><span class="op">)</span></span>
<span>    </span>
<span>    <span class="co"># Or add16 hours in seconds ...</span></span>
<span>    <span class="fu"><a href="../reference/timeDate-Calendar.html">timeCalendar</a></span><span class="op">(</span><span class="fl">2008</span>, m<span class="op">=</span><span class="fl">1</span>, d<span class="op">=</span><span class="fl">1</span><span class="op">:</span><span class="fl">31</span>, zone<span class="op">=</span><span class="st">"Tokyo"</span>, FinCenter<span class="op">=</span><span class="st">"Zurich"</span><span class="op">)</span> <span class="op">+</span> <span class="fl">16</span><span class="op">*</span><span class="fl">3600</span></span>
<span>  </span></code></pre></div>


    </div>
    <div class="section level2">
    <h2 id="-operations-on-timedate-objects">2. Operations on <code>"timeDate"</code> Objects<a class="anchor" aria-label="anchor" href="#-operations-on-timedate-objects"></a></h2>
    

<p>Many operations can be performed on <code>"timeDate"</code> objects. You can add
  and subtract, round and truncate, subset, coerce or transform them to
  other objects. These are only few options among many others. <br></p>  
<p><b>Math Operations</b></p>  
<p>Math operations can add and subtract dates and times,
  and perform logical operations on <code>"timeDate"</code> objects.<br></p>  
<p>Examples:</p><div class="sourceCode"><pre><code><span></span>
<span>    <span class="co"># Date and Time Now:</span></span>
<span>    <span class="va">now</span> <span class="op">=</span> <span class="fu"><a href="../reference/timeDate-Sys.timeDate.html">Sys.timeDate</a></span><span class="op">(</span><span class="op">)</span></span>
<span>    </span>
<span>    <span class="co"># One Hour Later:</span></span>
<span>    <span class="va">now</span> <span class="op">+</span> <span class="fl">3600</span></span>
<span>    </span>
<span>    <span class="co"># Which date/time is earlier or later ?</span></span>
<span>    <span class="va">tC</span> <span class="op">=</span> <span class="fu"><a href="../reference/timeDate-Calendar.html">timeCalendar</a></span><span class="op">(</span><span class="op">)</span> </span>
<span>    <span class="va">tR</span> <span class="op">=</span> <span class="va">tC</span> <span class="op">+</span> <span class="fu"><a href="../reference/base-round.html">round</a></span><span class="op">(</span><span class="fl">3600</span><span class="op">*</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">12</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="va">tR</span> <span class="op">&gt;</span> <span class="va">tC</span></span>
<span>  </span></code></pre></div>
  
<p><b>Lagging</b></p>  
<p>You can generate suitable lagged and iterated differences:<br></p>  
<p><code>diff.timeDate</code> -- Returns suitably lagged and iterated differences.<br></p>  
<p>Examples:</p><div class="sourceCode"><pre><code><span></span>
<span>    <span class="co"># Monthly Dates 2008 and January 2009:</span></span>
<span>    <span class="va">tC</span> <span class="op">=</span> <span class="fu"><a href="../reference/base-c.html">c</a></span><span class="op">(</span><span class="fu"><a href="../reference/timeDate-Calendar.html">timeCalendar</a></span><span class="op">(</span><span class="fl">2008</span><span class="op">)</span>, <span class="fu"><a href="../reference/timeDate-Calendar.html">timeCalendar</a></span><span class="op">(</span><span class="fl">2009</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span></span>
<span>    </span>
<span>    <span class="co"># Number of days in months and total 2008:</span></span>
<span>    <span class="fu"><a href="../reference/base-diff.html">diff</a></span><span class="op">(</span><span class="va">tC</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="fu"><a href="../reference/base-diff.html">diff</a></span><span class="op">(</span><span class="va">tC</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>  </span></code></pre></div>
  
<p><b>Rounding and Truncating</b></p>  
<p>Dates and times can be rounded or truncated. This is useful lower
  frequencies than seconds, for example hourly. <br></p>  
<p><code>round</code> -- rounds objects of class <code>"timeDate"</code>, <br><code>trunc</code> -- truncates objects of class <code>"timeDate"</code>. <br></p>  
<p>Examples:</p><div class="sourceCode"><pre><code><span></span>
<span>    <span class="co"># Round the Random Time Stamps to the Nearest Hour:</span></span>
<span>    <span class="va">tC</span> <span class="op">=</span> <span class="fu"><a href="../reference/timeDate-Calendar.html">timeCalendar</a></span><span class="op">(</span><span class="op">)</span></span>
<span>    <span class="va">tR</span> <span class="op">=</span> <span class="va">tC</span> <span class="op">+</span> <span class="fu"><a href="../reference/base-round.html">round</a></span><span class="op">(</span><span class="fl">3600</span><span class="op">*</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">12</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="va">tR</span></span>
<span>    <span class="fu"><a href="../reference/base-round.html">round</a></span><span class="op">(</span><span class="va">tR</span>, <span class="st">"h"</span><span class="op">)</span></span>
<span>    </span>
<span>    <span class="co"># Truncate by Hour or to the Next Full Hour::</span></span>
<span>    <span class="fu"><a href="../reference/base-round.html">trunc</a></span><span class="op">(</span><span class="va">tR</span>, <span class="st">"h"</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="../reference/base-round.html">trunc</a></span><span class="op">(</span><span class="va">tR</span> <span class="op">+</span> <span class="fl">3600</span>, <span class="st">"h"</span><span class="op">)</span></span>
<span>  </span></code></pre></div>

  
<p><b>Subsetting</b></p>  
<p>Subsetting a <code>"timeDate"</code> is a very important issue in the management of 
  dates and times. Rmetrics offers several functions which are useful in 
  this context: <br></p>  
<p><code>"["</code> -- Extracts or replaces subsets from <code>"timeDate"</code> objects,
  <br><code>window, cut</code> -- extract a piece from a <code>"timeDate"</code> object, <br></p>  
<p>In this context it is also important to know the <code>start</code>
  and the <code>end</code> time stamp together with the total number of
  time stamps. <br></p>  
<p><code>start</code> -- extracts the first entry of a <code>"timeDate"</code> object, <br><code>end</code> -- extracts the last entry of a <code>"timeDate"</code> object, <br><code>length</code> -- returns the length of a <code>"timeDate"</code> object. <br></p>
<p>Examples:</p><div class="sourceCode"><pre><code><span></span>
<span>    <span class="co"># Create Monthly Calendar for next year</span></span>
<span>    <span class="va">tC</span> <span class="op">=</span> <span class="fu"><a href="../reference/timeDate-Calendar.html">timeCalendar</a></span><span class="op">(</span><span class="fu"><a href="../reference/options-RmetricsOptions.html">getRmetricsOptions</a></span><span class="op">(</span><span class="st">"currentYear"</span><span class="op">)</span> <span class="op">+</span> <span class="fl">1</span><span class="op">)</span></span>
<span>    <span class="va">tC</span></span>
<span></span>
<span>    <span class="co"># Start, end and length of 'timeDate' objects</span></span>
<span>    <span class="fu"><a href="../reference/base-start.html">start</a></span><span class="op">(</span><span class="va">tC</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="../reference/base-start.html">end</a></span><span class="op">(</span><span class="va">tC</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="../reference/base-length.html">length</a></span><span class="op">(</span><span class="va">tC</span><span class="op">)</span></span>
<span>    </span>
<span>    <span class="co"># The first Quarter - Several Alternative Solutions:</span></span>
<span>    <span class="va">tC</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span></span>
<span>    <span class="va">tC</span><span class="op">[</span><span class="op">-</span><span class="op">(</span><span class="fl">4</span><span class="op">:</span><span class="fu"><a href="../reference/base-length.html">length</a></span><span class="op">(</span><span class="va">tC</span><span class="op">)</span><span class="op">)</span><span class="op">]</span></span>
<span>    <span class="fu"><a href="../reference/stats-window.html">window</a></span><span class="op">(</span><span class="va">tC</span>, start <span class="op">=</span> <span class="va">tC</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, end <span class="op">=</span> <span class="va">tC</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/cut.html" class="external-link">cut</a></span><span class="op">(</span><span class="va">tC</span>, from <span class="op">=</span> <span class="va">tC</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, to <span class="op">=</span> <span class="va">tC</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span></span>
<span>    <span class="va">tC</span><span class="op">[</span><span class="va">tC</span> <span class="op">&lt;</span> <span class="va">tC</span><span class="op">[</span><span class="fl">4</span><span class="op">]</span><span class="op">]</span></span>
<span>    </span>
<span>    <span class="co"># The Quarterly Series:</span></span>
<span>    <span class="va">tC</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">12</span>, by <span class="op">=</span> <span class="fl">3</span><span class="op">)</span><span class="op">]</span></span>
<span>    </span>
<span>    </span>
<span>    </span>
<span>    </span>
<span>    </span>
<span>    </span>
<span>  </span></code></pre></div>
    
<p>Weekdays, weekends, business days, and holidays can be easily
  obtained with the following functions: <br></p>  
<p><code>isWeekday</code> -- tests if a date is a weekday or not, <br><code>isWeekend</code> -- tests if a date is a weekend day or not, <br><code>isBizday</code> -- tests if a date is a business day or not, <br><code>isHoliday</code> -- tests if a date is a holiday day or not. <br></p>  
  
<p>Examples:</p><div class="sourceCode"><pre><code><span></span>
<span>    <span class="co"># A 'timeDate' Sequence around Easter 2008</span></span>
<span>    <span class="fu"><a href="../reference/calendar-Easter.html">Easter</a></span><span class="op">(</span><span class="fl">2008</span><span class="op">)</span></span>
<span>    <span class="va">tS</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/timeDate-Sequence.html">timeSequence</a></span><span class="op">(</span><span class="fu"><a href="../reference/calendar-Easter.html">Easter</a></span><span class="op">(</span><span class="fl">2008</span>, <span class="op">-</span><span class="fl">14</span><span class="op">)</span>, <span class="fu"><a href="../reference/calendar-Easter.html">Easter</a></span><span class="op">(</span><span class="fl">2008</span>, <span class="op">+</span><span class="fl">14</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="va">tS</span></span>
<span>    </span>
<span>    <span class="co"># Subset weekdays and business days:</span></span>
<span>    <span class="va">tW</span> <span class="op">&lt;-</span> <span class="va">tS</span><span class="op">[</span><span class="fu"><a href="../reference/calendar-isWeekday.html">isWeekday</a></span><span class="op">(</span><span class="va">tS</span><span class="op">)</span><span class="op">]</span>; <span class="va">tW</span></span>
<span>    <span class="fu"><a href="../reference/calendar-dayOfWeek.html">dayOfWeek</a></span><span class="op">(</span><span class="va">tW</span><span class="op">)</span></span>
<span>    <span class="va">tB</span> <span class="op">&lt;-</span> <span class="va">tS</span><span class="op">[</span><span class="fu"><a href="../reference/calendar-isBizday.html">isBizday</a></span><span class="op">(</span><span class="va">tS</span>, <span class="fu"><a href="../reference/holiday-ZURICH.html">holidayZURICH</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">]</span>; <span class="va">tB</span></span>
<span>    <span class="fu"><a href="../reference/calendar-dayOfWeek.html">dayOfWeek</a></span><span class="op">(</span><span class="va">tB</span><span class="op">)</span></span>
<span>  </span></code></pre></div>
  
<p>The functions <code>blockStart</code> and <code>blockEnd</code> gives 
  time stamps for equally sized blocks. <br></p>  
  
<p><code>blockStart</code> -- Creates start dates for equally sized blocks, <br><code>blockEnd</code> -- Creates end dates for equally sized blocks. <br></p>  
  
<p>Examples:</p><div class="sourceCode"><pre><code><span></span>
<span>    <span class="co"># 'timeDate' object for the last 365 days:</span></span>
<span>    <span class="va">tS</span> <span class="op">=</span> <span class="fu"><a href="../reference/timeDate-Sequence.html">timeSequence</a></span><span class="op">(</span>length.out <span class="op">=</span> <span class="fl">360</span><span class="op">)</span></span>
<span>    <span class="va">tS</span></span>
<span>    </span>
<span>    <span class="co"># Subset Pointers for blocks of exactly 30 days:</span></span>
<span>    <span class="fu"><a href="../reference/stats-blockStart.html">blockStart</a></span><span class="op">(</span><span class="va">tS</span>, <span class="fl">30</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="../reference/stats-blockStart.html">blockEnd</a></span><span class="op">(</span><span class="va">tS</span>, <span class="fl">30</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="../reference/timeDate-Sys.timeDate.html">Sys.timeDate</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  </span></code></pre></div>
  
<p><b>Coercions and Transformations</b></p>  
<p><code>"timeDate"</code> objects are not living in an isolated world. Coercions and  
  transformations allow <code>"timeDate"</code> objects to communicate with other 
  formatted time stamps. Be aware that in most cases information can be 
  lost if the other date.time classes do not support this functionality.
  There exist several methods to coerce and transform <code>"timeDate"</code>
  objects into other objects. <br></p>  

<p><code>as.timeDate</code> -- Implements Use Method, <br><code>as.timeDate.default</code> -- default Method, <br><code>as.timeDate.POSIXt</code> -- returns a 'POSIX' object as <code>"timeDate"</code>
  object, <br><code>as.timeDate.Date</code> -- returns a 'POSIX' object as <code>"timeDate"</code>
  object. <br></p>  
<p><code>as.character.timeDate</code> -- Returns a <code>"timeDate"</code> object as
  'character' string, <br><code>as.double.timeDate</code> -- returns a <code>"timeDate"</code> object as 'numeric'
  object, <br><code>as.data.frame.timeDate</code> -- returns a <code>"timeDate"</code> object as
  'data.frame' object, <br><code>as.POSIXct.timeDate</code> -- returns a <code>"timeDate"</code> object as 'POSIXct'
  object, <br><code>as.POSIXlt.timeDate</code> -- returns a <code>"timeDate"</code> object as 'POSIXlt'
  object, <br><code>as.Date.timeDate</code> -- returns a <code>"timeDate"</code> object as 'Date'
  object. <br></p>  
<p>Users or maintainers of other date/time classes can add their own 
  generic functions. For example <code>as.timeDate.zoo</code> and 
  <code>as.zoo.timeDate</code>. <br></p>  
  
<p><b>Concatenations and Reorderings</b></p>  
<p>It might be sometimes useful to concatenate or reorder <code>"timeDate"</code>
  objects. The generic functions to concatenate, replicate, sort,
  re-sample, unify and revert a <code>"timeDate"</code> objects are : <br></p>

<p><code>c</code> -- Concatenates <code>"timeDate"</code> objects, <br><code>rep</code> -- replicates a <code>"timeDate"</code> object, <br><code>sort</code> -- sorts a <code>"timeDate"</code> object, <br><code>sample</code> -- resamples a <code>"timeDate"</code> object,<br><code>unique</code> -- makes a <code>"timeDate"</code> object unique, <br><code>rev</code> -- reverts a <code>"timeDate"</code> object. <br></p>  
<p>NOTE: The function <code>c</code> of a <code>"timeDate"</code> objects takes care of
  possible different financial centers specific to each object to be
  concatenated. In such cases, all time stamps will be transformed to
  the financial center of the first time stamp used in the
  concatenation: <br></p>
<p>Examples:</p><div class="sourceCode"><pre><code><span></span>
<span>    <span class="co"># Concatenate the local time stamps to Zurich time ...</span></span>
<span>    <span class="va">ZH</span> <span class="op">=</span> <span class="fu"><a href="../reference/timeDate.html">timeDate</a></span><span class="op">(</span><span class="st">"2008-01-01 16:00:00"</span>, zone <span class="op">=</span> <span class="st">"GMT"</span>, FinCenter <span class="op">=</span> <span class="st">"Zurich"</span><span class="op">)</span></span>
<span>    <span class="va">NY</span> <span class="op">=</span> <span class="fu"><a href="../reference/timeDate.html">timeDate</a></span><span class="op">(</span><span class="st">"2008-01-01 18:00:00"</span>, zone <span class="op">=</span> <span class="st">"GMT"</span>, FinCenter <span class="op">=</span> <span class="st">"NewYork"</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="../reference/base-c.html">c</a></span><span class="op">(</span><span class="va">ZH</span>, <span class="va">NY</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="../reference/base-c.html">c</a></span><span class="op">(</span><span class="va">NY</span>, <span class="va">ZH</span><span class="op">)</span></span>
<span>    </span>
<span>    <span class="co"># Rordering:</span></span>
<span>    <span class="va">tC</span> <span class="op">=</span> <span class="fu"><a href="../reference/timeDate-Calendar.html">timeCalendar</a></span><span class="op">(</span><span class="op">)</span>; <span class="va">tC</span></span>
<span>    <span class="va">tS</span> <span class="op">=</span> <span class="fu"><a href="../reference/base-sample.html">sample</a></span><span class="op">(</span><span class="va">tC</span><span class="op">)</span>; <span class="va">tS</span></span>
<span>    <span class="va">tO</span> <span class="op">=</span> <span class="fu"><a href="../reference/base-sort.html">sort</a></span><span class="op">(</span><span class="va">tS</span><span class="op">)</span>; <span class="va">tO</span></span>
<span>    <span class="va">tV</span> <span class="op">=</span> <span class="fu"><a href="../reference/base-rev.html">rev</a></span><span class="op">(</span><span class="va">tO</span><span class="op">)</span>; <span class="va">tV</span></span>
<span>    <span class="va">tU</span> <span class="op">=</span> <span class="fu"><a href="../reference/base-unique.html">unique</a></span><span class="op">(</span><span class="fu"><a href="../reference/base-c.html">c</a></span><span class="op">(</span><span class="va">tS</span>, <span class="va">tS</span><span class="op">)</span><span class="op">)</span>; <span class="va">tU</span></span>
<span>  </span></code></pre></div>


    </div>
    <div class="section level2">
    <h2 id="-daylight-saving-time-and-financial-centers">3. Daylight Saving Time and Financial Centers<a class="anchor" aria-label="anchor" href="#-daylight-saving-time-and-financial-centers"></a></h2>
    

<p>Each financial center worldwide has a function 
  which returns Daylight Saving Time Rules. Almost 400
  prototypes are made available through the Olson time zone
  data base. The cities and regions can be listed using the
  command <code>listFinCenter</code>. The DST rules for specific
  financial center can be viewed by their name, e.g. <code><a href="timeDate-DaylightSavingTime.html">Zurich()</a></code>.
  Additional financial centers can be added by the user taking care
  of the format specification of the DST functions.<br></p>  
  
<p><b>Setting Financial Centers</b></p>  
  
<p>All time stamps are handled according to the time zone and daylight
  saving time rules specified by the center through the variable
  <code>myFinCenter</code>. This variable is set by default to <code>"GMT"</code>
  but can be changed to your local financial center or to any other
  financial center you want to use. <br></p>  
<p>NOTE: By setting the financial center to a continent/city which 
  lies outside of the time zone used by your computer does not change
  any time settings or environment variables used by your computer. <br></p>  
<p>To change the name of a financial center from one setting to another
  just assign to the variable <code>myFinCenter</code> the desired name
  of the city:</p>  
<p>Examples:</p><div class="sourceCode"><pre><code><span></span>
<span>    <span class="co"># What is my current Financial Center ?</span></span>
<span>    <span class="fu"><a href="../reference/options-RmetricsOptions.html">getRmetricsOptions</a></span><span class="op">(</span><span class="st">"myFinCenter"</span><span class="op">)</span></span>
<span></span>
<span>    <span class="co"># Change to Zurich:</span></span>
<span>    <span class="fu"><a href="../reference/options-RmetricsOptions.html">setRmetricsOptions</a></span><span class="op">(</span>myFinCenter <span class="op">=</span> <span class="st">"Zurich"</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="../reference/options-RmetricsOptions.html">getRmetricsOptions</a></span><span class="op">(</span><span class="st">"myFinCenter"</span><span class="op">)</span></span>
<span>  </span></code></pre></div>
  
<p>From now on, all dates and times are handled within the middle European 
  time zone and the DST rules which are valid for Zurich.</p>
  
<p><b>List of Financial Centers</b></p>  
<p>There are many other financial centers supported by Rmetrics. They
  can be displayed by the function <code>listFinCenter</code>. You can also
  display partial lists with wildcards and regular expressions:</p>  
  
<p>Examples:</p><div class="sourceCode"><pre><code><span></span>
<span>    <span class="co"># List all supported Financial Centers Worldwide:</span></span>
<span>    <span class="fu"><a href="../reference/timeDate-listFinCenter.html">listFinCenter</a></span><span class="op">(</span><span class="op">)</span></span>
<span>    </span>
<span>    <span class="co"># List European Financial Centers:</span></span>
<span>    <span class="fu"><a href="../reference/timeDate-listFinCenter.html">listFinCenter</a></span><span class="op">(</span><span class="st">"Europe/*"</span><span class="op">)</span></span>
<span>  </span></code></pre></div>
  
<p><b>DST Rules</b></p>  
<p>For each financial center a function is available. It keeps the
  information of the time zones and the DST rules. The functions return
  a data.frame with 4Columns :</p>  
<p></p><div class="sourceCode"><pre><code>
    Zurich offSet isdst TimeZone
    ...
    62  2008-03-30 01:00:00   7200     1     CEST
    63  2008-10-26 01:00:00   3600     0      CET
    ...
  </code></pre></div>
  
<p>The first column describes when the time was changed, the second
  gives the offset to "GMT", the third returns the daylight savings time
  flag which is positive if in force, zero if not, and negative if
  unknown.  The last column gives the name of the time zone. You can
  have a look at the function <code><a href="timeDate-DaylightSavingTime.html">Zurich()</a></code> : <br></p>  
<p>Examples:</p><div class="sourceCode"><pre><code><span></span>
<span>    <span class="co"># Show the DST Rules for Zurich:</span></span>
<span>    <span class="fu"><a href="../reference/timeDate-DaylightSavingTime.html">Zurich</a></span><span class="op">(</span><span class="op">)</span></span>
<span>    </span>
<span>    <span class="co"># List European Financial Centers:</span></span>
<span>    <span class="fu"><a href="../reference/timeDate-listFinCenter.html">listFinCenter</a></span><span class="op">(</span><span class="st">"Europe/*"</span><span class="op">)</span></span>
<span>  </span></code></pre></div>
  

    </div>
    <div class="section level2">
    <h2 id="-holidays-and-holiday-calendars">3. Holidays and Holiday Calendars<a class="anchor" aria-label="anchor" href="#-holidays-and-holiday-calendars"></a></h2>
    

<p>It is non-trivial to implement function for business days, weekends
  and holidays. It is not difficult in an algorithmic sense, but it can
  become tedious to implement the rules of the calendar themselves, for
  example the date of Easter.</p>
<p>In the following section we briefly summarise the functions which can 
  calculate dates of ecclesiastical and public holidays. With the 
  help of these functions we can also create business and holiday 
  calendars.</p>
  
<p><b>Special Dates:</b></p>  
<p>The implemented functions can compute the last day in a given 
  month and year, the dates in a month that is a n-day 
  (e.g. n- = Sun) on or after a given date, the dates in a 
  month that is a n-day on or before a specified date, 
  the n-th occurrences of a n-day for a specified year/month vectors, 
  or the last n-day for a specified year/month value or vector. <br></p>  
<p>NOTE: n-days are numbered from 0 to 6 where 0 correspond to the 
  Sunday and 6 to the Saturday. <br></p>  
  
<p><code>timeFirstDayInMonth</code> -- Computes the first day in a given month
  and year, <br><code>timeLastDayInMonth</code> -- Computes the last day in a given month
  and year, <br><code>timeFirstDayInQuarter</code> -- Computes the first day in a given
  quarter and year, <br><code>timeLastDayInQuarter</code> -- Computes the last day in a given
  quarter and year, <br></p>  
<p><code>timeNdayOnOrAfter</code> -- Computes date that is a "on-or-after"
  n-day, <br><code>timeNdayOnOrBefore</code> --b Computes date that is a "on-or-before"
  n-day, <br></p>  
<p><code>timeNthNdayInMonth</code> -- Computes n-th occurrence of a n-day in
  year/month, <br><code>timeLastNdayInMonth</code> -- Computes the last n-day in
  year/month. <br></p>  
<p><b>Holidays:</b></p>  
  
<p>Holidays may have two origins: ecclesiastical or public/federal. The 
  ecclesiastical calendars of Christian churches are based on cycles 
  of movable and immovable feasts. Christmas, December 25, is the 
  principal immovable feast. Easter is the principal movable feast, 
  and dates of most of the other movable feasts are determined with
  respect to Easter. However, the movable feasts of the Advent and
  Epiphany seasons are Sundays reckoned from Christmas and the Feast of
  the Epiphany, respectively.</p>  
<p>Examples:</p><div class="sourceCode"><pre><code><span></span>
<span>    <span class="co"># List Holidays available in Rmetrics</span></span>
<span>    <span class="fu"><a href="../reference/holiday-Listing.html">listHolidays</a></span><span class="op">(</span><span class="op">)</span></span>
<span>    </span>
<span>    <span class="co"># The date of Easter for the next 5 years:</span></span>
<span>    <span class="va">currentYear</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/options-RmetricsOptions.html">getRmetricsOptions</a></span><span class="op">(</span><span class="st">"currentYear"</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="../reference/calendar-Easter.html">Easter</a></span><span class="op">(</span><span class="va">currentYear</span><span class="op">:</span><span class="op">(</span><span class="va">currentYear</span><span class="op">+</span><span class="fl">5</span><span class="op">)</span><span class="op">)</span></span>
<span>  </span></code></pre></div>
  
  
<p><b>Holiday Calendars:</b></p>  
  
<p><code>holidayZURICH</code> -- Zurich Business Calendar, <br><code>holidayNYSE</code> -- NYSE Stock Exchange Holiday Calendar, <br><code>holidayZURICH</code> -- TSX Holiday Calendar. <br></p>  
  
<p>We would like to thanks all Rmetrics users who gave us many additional
  information concerning local holidays.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    

<p>Bateman R., (2000);
  <em>Time Functionality in the Standard C Library</em>,
  Novell AppNotes, September 2000 Issue, 73--85.</p>
<p>Becker R.A., Chambers J.M., Wilks A.R. (1988);
  <em>The New S Language</em>, Wadsworth &amp; Brooks/Cole.</p>
<p>ISO-8601, (1988);
  <em>Data Elements and Interchange Formats -
    Information Interchange, Representation of Dates and Time</em>,
  International Organization for Standardization,
  Reference Number ISO 8601, 14 pages.</p>
<p>James D.A., Pregibon D. (1992),
  <em>Chronological Objects for Data Analysis</em>,
  Reprint.</p>
<p>Ripley B.D., Hornik K. (2001);
  <em>Date-Time Classes</em>,
  R-News, Vol. 1/2 June 2001, 8--12.</p>
<p>Zivot, E., Wang J. (2003);
  <em>Modeling Financial Time Series with S-Plus</em>,
  Springer, New-York.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Diethelm Wuertz, Tobias Setz, Yohan Chalabi, Georgi N. Boshnakov.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

