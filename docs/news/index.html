<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Changelog • timeDate</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Changelog"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">timeDate</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">4032.109.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-news">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Changelog</h1>
      
    </div>

    <div class="section level2">
<h2 class="pkg-version" data-toc-text="4032.109" id="timedate-4032109">timeDate 4032.109<a class="anchor" aria-label="anchor" href="#timedate-4032109"></a></h2><p class="text-muted">CRAN release: 2023-12-14</p>
<ul><li><p>new function <code>earlyCloseNYSE</code> gives datetimes of early closings of NYSE, including scheduled and unscheduled ones. The information is incomlete. This answers issue [#6757], see also the related issue [#1356] mentioned below in the news for a previous version.</p></li>
<li><p>all functions returning public and eclessiastical holidays get new arguments <code>value</code>, <code>na_drop</code>, and <code>...</code>, controlling the type of the return value and the handling of missing values. Argument <code>...</code> is for things like ‘format’ when applicable. Not all honour the new arguments though, see below.</p></li>
<li><p>all functions returning public and eclessiastical holidays now honour the new argument <code>value</code>.</p></li>
<li><p>some holiday functions were amended or rewritten to honour the new argument <code>na_drop</code>. These include the England holidays (‘GBxxx’), some Japan holidays (JPxxx), and a number of other functions (e.g., `CAFamilyDay). Contributions and/or information needed to have them do so is wellcome (e.g. dates when a holiday was introduced and/or moved).</p></li>
<li><p><code><a href="../reference/timeDate-midnightStandard.html">midnightStandard2()</a></code> (and hence <code><a href="../reference/timeDate.html">timeDate()</a></code>) was throwing a puzzling error when the input character vector contained one or more <code>NA</code>s mixed with non-NA’s.</p></li>
<li><p><code><a href="../reference/timeDate-whichFormat.html">whichFormat()</a></code> was throwing error when the <em>first</em> element of the input vector was <code>NA</code>. This could be considered a feature but that’s inconsistent since <code>NA</code>s at other positions were not causing trouble. Now fixed.</p></li>
<li><p>the ‘character’ method for <code><a href="../reference/timeDate.html">timeDate()</a></code> was passing only the first element of the input vector to <code><a href="../reference/timeDate-whichFormat.html">whichFormat()</a></code>. This was preventing it from inferring the format when argument ‘format’ was missing.</p></li>
<li><p>new function <code>specialHolidayGB</code> gives the special UK one-off holidays for the requested years.</p></li>
<li><p><code>MilleniumDay</code> is now deprecated, use <code>specialHolidayGB(1999)</code>.</p></li>
<li><p>fixed omissions in <code>holidayLONDON</code> and refactored it completely. It became easier to maintain and orders of magnitude faster.</p></li>
<li><p>fixed a bug in an internal function which was throwing errors from <code>holidayLONDON</code> for some ranges including years before 1916.</p></li>
<li><p><code>GBEarlyMayBankHoliday</code>, <code>GBSpringBankHoliday</code> and <code>GBSummerBankHoliday</code> now give dates according to historical rules, not simply according to current ones. See the remarks above about the new arguments of holiday functions.</p></li>
<li>
<p>major overhaul and update of the Japan’s holidays. Previously fixed dates were returned for each holiday. Now moving holidays are calculated (e.g., second month of January) and some exceptions handled (like holidays moved due to the Olympics in 2020 and 2021). Historical changes are (partially) taken into account. Further corrections and historical amendments are welcome.</p>
<p>Thanks to Sylvie Lachaud for reporting the issues with Japan holiday functions, as well as providing current correct definitions and extensive list of links.</p>
</li>
<li><p>new function <code>JPMountainDay</code> gives the relatively recently introduced Japan holiday ‘Mountain Day’.</p></li>
<li><p><code>JPKeirouNoHi</code> replaces <code>JPKeirouNOhi</code>. The latter is an aberration from all other <code>xxxNoHi</code> Japanese holiday functions and a source of difficult to spot errors. The old one is now deprecated and will be removed in the future.</p></li>
<li><p>modified the ‘timeDate’ method for <code>summary</code> to return an object from class “timeDate_summary” (rather than print directly) and created a print method for the latter.</p></li>
<li><p>deprecated the <code>timeDate</code> method for <code>cut</code>, see deprecation note for v4021.105 below.</p></li>
<li><p>stopped exporting all but one (<code>.endpoints</code>) functions starting with a ‘.’. They all seem for internal purposes and/or have similarly named functions with normal names.</p></li>
<li><p>removed <code>.whichFormat</code> and <code>.midnightStandard</code>, not officially deprecated but had been renamed to <code><a href="../reference/timeDate-whichFormat.html">whichFormat()</a></code> and <code><a href="../reference/timeDate-midnightStandard.html">midnightStandard()</a></code>, respectively, a long time ago.</p></li>
<li><p>removed several internal functions that are no longer used anywhere in the package.</p></li>
<li><p>removed file ‘namespace-tags.R’ as it had not been updated recently, see revision r83578 or earlier if you need it.</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="4022.108" id="timedate-4022108">timeDate 4022.108<a class="anchor" aria-label="anchor" href="#timedate-4022108"></a></h2><p class="text-muted">CRAN release: 2023-01-07</p>
<ul><li><p>added the 2023 UK Bank holiday for the coronation of King Charles III.</p></li>
<li><p><code>axis.timeDate</code> was not handling properly the case when <code>x</code> was missing, leading to errors from R-devel check (2023-01-07 r83578). Fix suggested by Uwe Lieges.</p></li>
<li><p>refactored file NAMESPACE to facilitate maintenance (that revealed the two omissions listed below).</p></li>
<li><p><code>CAFamilyDay</code> (Canada Family Day) was missing from the list returned by <code><a href="../reference/holiday-Listing.html">listHolidays()</a></code>. It was missing only from that list, <code><a href="../reference/holiday-TSX.html">holidayTSX()</a></code> was including it when applicable.</p></li>
<li><p><code>JPVernalEquinox</code> was missing from the list returned by <code><a href="../reference/holiday-Listing.html">listHolidays()</a></code>.</p></li>
<li><p>the financial centers are now updated to reflect changes in time zones in recent years. The list returned by <code><a href="../reference/timeDate-listFinCenter.html">listFinCenter()</a></code> is synchronised with current time zone names. Previous names supported by timeDate are available as aliases.</p></li>
<li><p>import selectively from ‘stats’ and ‘utils’.</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="4021.107" id="timedate-4021107">timeDate 4021.107<a class="anchor" aria-label="anchor" href="#timedate-4021107"></a></h2><p class="text-muted">CRAN release: 2022-12-08</p>
<ul><li><p>London financial centre holidays - fixed and/or included non-standard holidays (e.g., Early May Bank holiday was moved in 2020 to VE day; Spring Bank holiday was moved in Queen’s Jubilee years; state funeral of the Queen). Millenium day now is included in the result of <code>holidayLONDON(1999)</code>. The London holidays should now be complete up to the time of writing this (1 Oct 2022).</p></li>
<li><p>renamed <code>GBMayDay</code> to <code>GBEarlyMayBankHoliday</code> and <code>GBBankHoliday</code> to <code>GBSpringBankHoliday</code>. The old names are somewhat ambiguous and strongly discouraged but still available. <code><a href="../reference/holiday-Listing.html">listHolidays()</a></code> gives the new names.</p></li>
<li><p>the generic <code><a href="../reference/timeDate.html">timeDate()</a></code> gets argument ‘…’ to allow methods for it to have additional arguments (e.g., for DST gaps).</p></li>
<li><p>the ‘character’ method for <code><a href="../reference/timeDate.html">timeDate()</a></code> gets a new argument <code>dst_gap</code> to control what to do with non-existent DST times at the requested <code>FinCenter</code> with options to add/subtract (“+”, “-”) the DST shift or set them to <code>NA</code>.</p></li>
<li><p><code><a href="../reference/timeDate.html">timeDate()</a></code> was not handling correctly some times just after the switch to/from DST. This was visible mostly for time zones away from GMT and GMT+1.</p></li>
<li>
<p>In <code><a href="../reference/timeDate-Sequence.html">timeSequence()</a></code>, if any of the generated times would fall in DST gaps, they are moved by “+1 hour”, corresponding to <code>dst_gap = "+"</code> in <code>timeDate</code>. This is consistent with <code>seq</code> for other time objects. Currently there is no option to change this behaviour of <code>timeSequence</code>.</p>
<p>Previously <code>timeSequence</code> was moving DST gaps down by 1 hour (for by = ‘DSTday’ and similar). This was not consistent similar time functions in R and was actually due to a bug (or unfinished DST handling) in <code>timeDate</code>, see remarks for <code>timeDate</code> above.</p>
</li>
<li><p><code><a href="../reference/timeDate-Sequence.html">timeSequence()</a></code> now throws error if argument <code>from</code> is in a DST gap. It seems desirable to have a default action for this case. Rolling the faulty time by an hour in the case of ‘DSTday’ may be suitable in most cases but for other values of <code>by</code> it might be totally wrong.</p></li>
<li><p>updated the DST rules.</p></li>
<li><p>internally, refactored the way the DST rules are generated (not visible to users).</p></li>
<li><p><code><a href="../reference/timeDate-rulesFinCenter.html">rulesFinCenter()</a></code> now looks for a financial center starting from the namespace of <code>timeDate</code>. Previously it was starting from the environment of the caller which could result in using an unrelated object or, if <code>timeDate</code> was loaded but not attached, not finding it.</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="4021.106" id="timedate-4021106">timeDate 4021.106<a class="anchor" aria-label="anchor" href="#timedate-4021106"></a></h2><p class="text-muted">CRAN release: 2022-09-30</p>
<ul><li>fix <code><a href="../reference/timeDate-whichFormat.html">whichFormat()</a></code> to accommodate a change in R-devel after which <code>as.character(Sys.time())</code> contains fractional seconds. (<code>format(Sys.time())</code> doesn’t; before this change in R-devel both were dropping the fractional seconds). (fixed by Martin Maechler, see timeDate rev 6286)</li></ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="4021.105" id="timedate-4021105">timeDate 4021.105<a class="anchor" aria-label="anchor" href="#timedate-4021105"></a></h2>
<ul><li>
<p>the list returned by <code>holidaysNYSE()</code> was missing the special closing days of the New York stock exchange (NYSE). Now it should be complete (though there may be ommissions after 2011). This fixes issue #1356 reported by Corwin Joy. Thanks to him and Ian E for the insigthful discussion and useful links.</p>
<p>See also below. Contributions for the other exchanges and corrections are welcome.</p>
</li>
<li>
<p><code>holidaysNYSE()</code> gets a new argument, <code>type</code>, to select what type of the exchange’s closing days to return. The default is to return all days in the requested years when NYSE was closed for whatever reason. Use <code>type = "standard"</code> and <code>type = special</code> to get the standard holidays and the special closings, respectively.</p>
<p>Returning any closing day by default might be considered a breaking change. However, not returning all closing days was perceived as erroneous by users (eg issue #1356). In fact, the package itself calculates business days by dropping weekends and days returned by <code>holidayXXXX</code>.</p>
<p>Note that <code><a href="../reference/holiday.html">holiday()</a></code> returns the actual dates of the public holidays, while the corresponding days returned by <code>holidayXXXX</code> are the resulting non-weekend closing days, if any.</p>
</li>
<li><p><code><a href="../reference/holiday-TSX.html">holidayTSX()</a></code> now correctly calculates Christmas and Boxing day closures when Christmas is on Monday. Fixes part (2) of issue #1288 reported by Stefan Wilhelm (part (1) was fixed in a previous release). The fix is really a patch for the specific issue, maybe the same should be done when Christmas is on Sunday, for example. Information/contribution on Canadian holidays is welcome.</p></li>
<li><p>now <code><a href="../reference/holiday.html">holiday()</a></code> accepts also a function or a list of functions for argument ‘Holiday’.</p></li>
<li><p><code>timeNthNdayInMonth</code> could return a value in the following month. Now fixed. This is bug #1463 reported with a fix by Manny C. Note that the bug was not present for dates in the first day of a month.</p></li>
<li><p><code>timeLastNdayInMonth</code> could return a value in the following month, e.g. ‘1996-06-04’ for the last Tuesday in May 1996. Now fixed. The check of this function was prompted by the bug report for #1463 (see above) for <code>timeNthNdayInMonth</code> but the error was different.</p></li>
<li><p>the <code>data.frame</code> methods for <code><a href="../reference/stats-kurtosis.html">kurtosis()</a></code> and <code><a href="../reference/stats-skewness.html">skewness()</a></code> now set attribute <code>method</code> as for the other methods and as documented.</p></li>
<li><p>removed <code>.holidayList()</code> which had been replaced by <code><a href="../reference/holiday-Listing.html">listHolidays()</a></code> a long time ago and was not exported in recent versions of <code>timeDate</code>.</p></li>
<li><p>updated documentation files.</p></li>
</ul><div class="section level3">
<h3 id="deprecation-notes-4021-105">Deprecation notes<a class="anchor" aria-label="anchor" href="#deprecation-notes-4021-105"></a></h3>
<ul><li>the <code>timeDate</code> method for <code>cut</code> has been discouraged in the sources for a long time with a recommendation to use <code>window</code> instead (just replace <code>cut(x,   from = xx , to = yy)</code> with <code>window(x, start = xx, end = yy)</code>. The <code>cut</code> method will be deprecated in the next release and later removed or replaced by a method that is consistent with the methods for <code>cut</code> in base R.</li></ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="4021.104" id="timedate-4021104">timeDate 4021.104<a class="anchor" aria-label="anchor" href="#timedate-4021104"></a></h2><p class="text-muted">CRAN release: 2022-07-19</p>
<ul><li><p>new maintainer: Georgi N. Boshnakov.</p></li>
<li><p>updated DESCRIPTION with links and moved all <code>Depends:</code> to <code>Imports:</code>.</p></li>
<li><p>removed the line <code>LazyData: yes</code> from DESCRIPTION to fix the NOTE on CRAN.</p></li>
<li><p>added the new US holiday, Juneteenth National Independence Day. Fixes #6755 by Ian E (ene100).</p></li>
<li><p><code><a href="../reference/holiday-TSX.html">holidayTSX()</a></code> now includes the Labour Day. Fixes part (1) of issue #1288 reported by Stefan Wilhelm.</p></li>
<li><p>created a first version of <code>_pkgdown.yml</code> for more organised view of the large number of objects in the package. Unpack the tarball and run <code><a href="https://pkgdown.r-lib.org/reference/build_site.html" class="external-link">pkgdown::build_site()</a></code> to build the site locally. Don’t know if this could work directly off the R-forge repository.</p></li>
</ul></div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="3043.102" id="timedate-3043102-and-older-versions">timeDate 3043.102 and older versions<a class="anchor" aria-label="anchor" href="#timedate-3043102-and-older-versions"></a></h2><p class="text-muted">CRAN release: 2018-02-21</p>
<p>See file <code>ChangeLog</code> for changes before 4021.104.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Diethelm Wuertz, Tobias Setz, Yohan Chalabi, Georgi N. Boshnakov.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

